<app-user></app-user>

<div *ngIf="loggedInUser$ | async">
<div *ngIf="smartItems$ | async as smartItems">
  <h1>Floorplan</h1>
  <h2>Ground floor</h2>
  <div class="flex-container">
    <div class="floorplan rounded shadow-sm">
      <button type="button" *ngFor="let smartItem of smartItems"
              [ngClass]="smartItem.on ? 'on' : 'off'"
           class="btn smart-item switch"
           style="top: {{smartItem.yPos}}px; left: {{smartItem.xPos}}px;"
           ngbPopover="{{smartItem.name}}" triggers="mouseenter:mouseleave" (click)="onSelect(smartItem)">
        {{smartItem.name}}
      </button>
    </div>
    <div>
      <app-detail *ngIf="!isCreating"></app-detail>
      <app-create *ngIf="isCreating"></app-create>
    </div>
  </div>
  <br>
  <br>
  <h2>All Smart Items:</h2>
  <table class="table table-hover">
    <thead>
    <tr>
      <th scope="col">Name</th>
      <th scope="col">X Position</th>
      <th scope="col">Y Position</th>
      <th scope="col">ON/OFF</th>
    </tr>
    </thead>
    <tbody *ngFor="let smartItem of smartItems">
      <tr>
        <td>{{smartItem.name}}</td>
        <td>{{smartItem.xPos}}</td>
        <td>{{smartItem.yPos}}</td>
        <td>
          <span *ngIf="smartItem.on">On</span>
          <span *ngIf="!smartItem.on">Off</span>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<app-log></app-log>

<div *ngIf="!smartItems$">
  No Smart Items created yet..
</div>
</div>

<button class="btn btn-primary" (click)="onClickCreate()">Create</button>



